/*! For license information please see src_controllers_history-controller_js.js.LICENSE.txt */
"use strict";(self.webpackChunkstimulus_starter=self.webpackChunkstimulus_starter||[]).push([["src_controllers_history-controller_js"],{"./src/controllers/history-controller.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _hotwired_stimulus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @hotwired/stimulus */ "./node_modules/@hotwired/stimulus/dist/stimulus.js");\n/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");\n/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/gsap-core.js");\n/* harmony import */ var swiper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swiper/core */ "./node_modules/swiper/swiper.esm.js");\n\n\n\n\nswiper__WEBPACK_IMPORTED_MODULE_1__["default"].use([swiper__WEBPACK_IMPORTED_MODULE_1__.EffectFade, swiper__WEBPACK_IMPORTED_MODULE_1__.Keyboard, swiper__WEBPACK_IMPORTED_MODULE_1__.Navigation]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class extends _hotwired_stimulus__WEBPACK_IMPORTED_MODULE_0__.Controller {\n  static targets = ["sliderMilestones"];\n  connect() {\n    this.x = 0;\n    this.yearsWrapper = document.querySelector(".years__wrapper");\n    this.yearsWrapperLeft = window.innerWidth - this.yearsWrapper.clientWidth;\n    this.markedYears = document.querySelectorAll(".years__mark.is-marked");\n    if (this.hasSliderMilestonesTarget) this.initSliderMilestones();\n    this.markedYears.forEach(year => {\n      year.addEventListener("click", e => {\n        this.sliderMilestones.slideToLoop(e.currentTarget.getAttribute("data-id"));\n      });\n    });\n  }\n  initSliderMilestones() {\n    const globalThis = this;\n    this.sliderMilestones = new swiper__WEBPACK_IMPORTED_MODULE_1__["default"](this.sliderMilestonesTarget, {\n      effect: "fade",\n      slidesPerView: 1,\n      speed: 1000,\n      fadeEffect: {\n        crossFade: true\n      },\n      loop: true,\n      autoHeight: true,\n      followFinger: false,\n      keyboard: true,\n      navigation: {\n        nextEl: this.sliderMilestonesTarget.querySelector(".slider__controls__button--next"),\n        prevEl: this.sliderMilestonesTarget.querySelector(".slider__controls__button--prev")\n      },\n      on: {\n        activeIndexChange: swiper => globalThis.onActiveIndexChange(swiper),\n        slideChangeTransitionStart: () => globalThis.onSlideChangeTransitionStart(),\n        slideNextTransitionStart: () => globalThis.onSlideNextTransitionStart(),\n        slidePrevTransitionStart: () => globalThis.onSlidePrevTransitionStart()\n      }\n    });\n    this.yearsWrapperLeft = window.innerWidth - this.yearsWrapper.clientWidth;\n    this.yearsWrapper.addEventListener("mousemove", this.onMouseMove.bind(this));\n  }\n  onActiveIndexChange(swiper) {\n    let activeIdx = swiper.realIndex;\n    this.markedYears.forEach(year => {\n      year.classList.remove("is-active");\n      if (year.getAttribute("data-id") == activeIdx) {\n        year.classList.add("is-active");\n        const yearsWrapperBounding = this.yearsWrapper.getBoundingClientRect();\n        const yearBounding = year.getBoundingClientRect();\n        const boundingLeft = yearBounding.left - yearsWrapperBounding.left;\n        this.x = gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.utils.mapRange(0, this.yearsWrapper.clientWidth, 0, this.yearsWrapperLeft, boundingLeft);\n        this.updateYearsWrapperX();\n      }\n    });\n  }\n  onSlideChangeTransitionStart() {\n    const activeSlides = this.sliderMilestonesTarget.querySelectorAll(".swiper-slide-active, .swiper-slide-duplicate-active");\n    activeSlides.forEach(slide => {\n      const title = slide.querySelector(".milestone__title");\n      const description = slide.querySelector(".milestone__description");\n      const image = slide.querySelector(".milestone__image img");\n      const year = slide.querySelector(".milestone__year span");\n      gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.fromTo([title, description], {\n        y: 40,\n        opacity: 0,\n        x: 0\n      }, {\n        y: 0,\n        x: 0,\n        opacity: 1,\n        stagger: {\n          each: 0.1,\n          ease: gsap__WEBPACK_IMPORTED_MODULE_3__.Power1.easeOut\n        },\n        duration: 0.6,\n        delay: 1,\n        transformOrigin: "-100% 50%"\n      });\n      gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.fromTo(image, {\n        scale: 0.8,\n        opacity: 0\n      }, {\n        skewY: 0,\n        scale: 1,\n        opacity: 1,\n        duration: 1\n      });\n      gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.fromTo(year, {\n        opacity: 1,\n        y: "100%"\n      }, {\n        opacity: 1,\n        y: 0,\n        duration: 0.6,\n        delay: 0.6\n      });\n    });\n  }\n  onSlideNextTransitionStart() {\n    const prevSlides = this.sliderMilestonesTarget.querySelectorAll(".swiper-slide-prev, .swiper-slide-duplicate-prev");\n    prevSlides.forEach(slide => {\n      const title = slide.querySelector(".milestone__title");\n      const description = slide.querySelector(".milestone__description");\n      const image = slide.querySelector(".milestone__image img");\n      gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.to([title, description], {\n        y: -40,\n        opacity: 0,\n        x: 0,\n        stagger: {\n          each: 0.1,\n          ease: gsap__WEBPACK_IMPORTED_MODULE_3__.Power1.easeOut\n        },\n        duration: 0.6,\n        transformOrigin: "-100% 50%"\n      });\n      gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.to(image, {\n        scale: 1.2,\n        skewY: 3,\n        opacity: 0,\n        duration: 1\n      });\n    });\n  }\n  onSlidePrevTransitionStart() {\n    const nextSlides = this.sliderMilestonesTarget.querySelectorAll(".swiper-slide-next, .swiper-slide-duplicate-next");\n    nextSlides.forEach(slide => {\n      const title = slide.querySelector(".milestone__title");\n      const description = slide.querySelector(".milestone__description");\n      const image = slide.querySelector(".milestone__image img");\n      gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.to([title, description], {\n        y: -40,\n        opacity: 0,\n        x: 0,\n        stagger: {\n          each: 0.1,\n          ease: gsap__WEBPACK_IMPORTED_MODULE_3__.Power1.easeOut\n        },\n        duration: 0.6,\n        transformOrigin: "-100% 50%"\n      });\n      gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.to(image, {\n        scale: 1.2,\n        skewY: -3,\n        opacity: 0,\n        duration: 1\n      });\n    });\n  }\n  onMouseMove(e) {\n    this.x = gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.utils.mapRange(0, window.innerWidth, 0, this.yearsWrapperLeft, e.clientX);\n    this.updateYearsWrapperX();\n  }\n  updateYearsWrapperX() {\n    gsap__WEBPACK_IMPORTED_MODULE_2__.gsap.to(this.yearsWrapper, {\n      x: this.x,\n      duration: 1,\n      ease: "expo.out"\n    });\n  }\n});\n\n//# sourceURL=webpack://stimulus-starter/./src/controllers/history-controller.js?')}}]);